import Redis from"ioredis";import{PATH_CERTIFICATE}from"../../../../root_path";export class redisService{client;constructor(e){this.client=new Redis(e),this.client.on("connect",(()=>{})),this.client.on("error",(e=>{}))}async streamerExist(e){return await this.client.sismember("streamers",JSON.stringify(e))}async addStreamer(e){let t={status:1,message:"OK"};return 1===await this.client.sadd("streamers",JSON.stringify(e))||(t.status=0,t.message="streamer already exists"),t}async getSize(){return await this.client.scard("streamers")}async clearList(){await this.client.del("streamers")}async listStreamers(){return(await this.client.smembers("streamers")).map((e=>JSON.parse(e)))}async testConnection(){let e=!0;return await this.client.on("connect",(()=>{e=!0})),await this.client.on("error",(t=>{e=!1})),e}async closeConnection(){await this.client.quit()}}const redisOptions={host:"redis-155624-0.cloudclusters.net",username:"guiw",port:18284,password:"123456789",tls:{rejectUnauthorized:!1}};export const redisServiceInstance=new redisService(redisOptions);