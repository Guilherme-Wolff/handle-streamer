import"reflect-metadata";import express from"express";import SaveLiveController from"./controllers/savelive.controller.js";import StreamersController from"./controllers/streamers.controller.js";import CookiesController from"./controllers/cookies.controller.js";import{config}from"../application/config/index.js";import{AuthMiddleware}from"./middleware/jwtMiddleware.js";const maintenanceMode=async(e,o,r)=>{if("true"===config.MAINTENANCE_MODE&&!e.path.includes("/setmntc"))return o.status(503).send("We are undergoing maintenance. Please come back later!");r()},setMaintenanceMode=async(e,o,r)=>{const{mntc:t}=e.body;t&&(config.MAINTENANCE_MODE=t,await o.json({message:t})),r()};function RouteTable(e){const o=express.Router();e.use("/api/v1",o),o.use(maintenanceMode),o.use("/tiktok",SaveLiveController),o.use("/streamers",StreamersController),o.get("/ola",((e,o,r)=>{o.json({ola:"ola vc"})})),o.use("/tiktok",SaveLiveController),o.use("/cookie",CookiesController),o.get("/alive",((e,o)=>{o.send({alive:!0})})),o.use("/prometheus_scrape",AuthMiddleware,(()=>{}))}export{RouteTable};